{%extends 'base.html'%}

{%block title%} Login{%endblock%}


{%block contenido%}
<section class="resumen">

    <h1 class="resumen__titulo">Movimientos</h1>
    <div class="resumen__cards">

        <div class="resumen__card__item ">
            <a href="/ventas" class="resumen__enlaces ">

                <div class="resumen__card__textos ">
                    <h3 class="resumen__card__titulo">{{ 0 if ventas_dia_cantidad is none else ventas_dia_cantidad }}
                    </h3>
                    <div class="resumen__card__paragraph">
                        <i class="bi bi-receipt resumen__card__icon"></i>
                        <p class="resumen__paragraph">Vendido</p>
                    </div>
                </div>
            </a>

        </div>

        <div class="resumen__card__item">
            <a href="/ventas" class="resumen__enlaces">
                <div class="resumen__card__textos">
                    <h3 class="resumen__card__titulo">{{ 0 if Ganancia_Total is none else Ganancia_Total }}
                    </h3>
                    <div class="resumen__card__paragraph">
                        <!-- <i class="bi bi-receipt "></i> -->
                        <i class="bi bi-cash-stack resumen__card__icon"></i>

                        <p class="resumen__paragraph">Ganancia</p>
                    </div>
                </div>
            </a>
        </div>

        <div class="resumen__card__item">
            <a href="/envios" class="resumen__enlaces">
                <div class="resumen__card__textos">
                    <h3 class="resumen__card__titulo">{{envios}}</h3>
                    <div class="resumen__card__paragraph">
                        <i class="bi bi-truck resumen__card__icon"></i>
                        <p class="resumen__paragraph">Enviar</p>
                    </div>
                </div>
            </a>
        </div>

        <div class="resumen__card__item">
            <a href="/apartados" class="resumen__enlaces">
                <div class="resumen__card__textos">
                    <h3 class="resumen__card__titulo">{{apartados}}</h3>
                    <div class="resumen__card__paragraph">
                        <i class="bi bi-calendar resumen__card__icon resumen__card__icon--modify"></i>
                        <p class="resumen__paragraph">Apartados</p>
                    </div>
                </div>
            </a>

        </div>

        <!--banderas-->
        <div class="container__banderas">
            <div class="resumen__card__item  resumen__card__item--bandera">
                <a href="/ventas" class="resumen__card__enlace">
                    <div class="resumen__card__textos resumen__card__textos--modify">
                        <p class="resumen__paragraph__bandera">Ventas del día</p>
                        <h3 class="resumen__card__titulo__bandera">{{ventas_dia}}</h3>
                    </div>
                </a>
            </div>

            <div class="resumen__card__item  resumen__card__item--bandera">
                <a href="/clientes" class="resumen__card__enlace">
                    <div class="resumen__card__textos resumen__card__textos--modify">
                        <p class="resumen__paragraph__bandera">Clientes</p>
                        <h3 class="resumen__card__titulo__bandera">{{total_clientes[0]}}</h3>
                    </div>
                </a>

            </div>

        </div>
    </div>

    <div class="resumen__cards">

        <div class="resumen__card__item2 ">
            <a href="/inventario" style="text-decoration: none; color: black;">
                <h3 class="resumen__card__titulo2">Más vendidos</h3>
                <!--Nueva tabla-->
                <table class="tabla__tablero table  custom-transparent-table table-striped table-hover  align-middle">
                    <thead>
                        <tr>
                            <th scope="col">Producto</th>
                            <th style="text-align: center;"" scope=" col">Veces vendido</th>
                        </tr>
                    </thead>
                    <tbody class="table-group-divider">
                        {% for indice in mas_vendidos %}
                        <tr>
                            <td>{{ indice[1] }}</td>
                            <td style="text-align: center;">{{ indice[2] }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </a>
        </div>





        <!-- Clientes que deben-->
        <div class="resumen__card__item2">
            <a href="/apartados" style="text-decoration: none; color: black;">
                <h3 class="resumen__card__titulo2">Deudores</h3>
                <!--Nueva tabla-->
                <table class="tabla__tablero table  custom-transparent-table table-striped table-hover  align-middle">
                    <thead>
                        <tr>
                            <th scope="col">Nombre</th> <!--Columna Encabezados-->
                            <th scope="col">Apellidos</th>
                            <th style="text-align: center;" scope="col">Total adeudo</th>
                        </tr>
                    </thead>
                    <tbody class="table-group-divider">
                        {% for indice in deudores %} <!--Nombre cualquiera + el que recibe de la variable-->
                        <tr>
                            <td>{{ indice[0] }}</td>
                            <td>{{ indice[1] }} {{ indice[2] }}</td>
                            <td style="text-align: center;">{{ indice[3] }}</td>
                            <!--Seccion de edicion (Editar/Eliminar)-->
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </a>
        </div>



        <!-- <div class="resumen__card__paragraph">
                    <i class="bi bi-receipt resumen__card__icon"></i>
                    <p class="resumen__paragraph">proxomios a vencer su pago</p>
                </div> -->
    </div>


    <!--resurtir-->
    <div class="resumen__cards resumen__cards--modify ">

        <div class="resumen__card__item2 resumen__card__item2--reebolso">
            <a href="/apartados" style="text-decoration: none;">
                <div class="resumen__card__reembolso__flex">
                    <p class="resumen__paragraph__invertir">Total en apartados</p>
                    <h3 class="resumen__card__invertir">{{dineroEnApartados[0][0]}}</h3>
                </div>
            </a>

        </div>

        <div class="resumen__card__item2 resumen__card__item2--reebolso">
            <a href="/inventario" style="text-decoration: none;">
                <div class="resumen__card__reembolso__flex">
                    <p class="resumen__paragraph__invertir">Total de productos</p>
                    <h3 class="resumen__card__invertir">{{total_producto[0]}}</h3>
                </div>
            </a>

        </div>
        <!--ultimo-->
        <div class="resumen__card__item2 resumen__card__item2--ultimo">

            <h3 class="resumen__card__objetivo">Objetivo del día</h3>
            <div class="experiencia__barras__container">
                <div class="progress-stacked">
                    <div class="progress-bar progress-bar-striped progress-bar-animated"
                        style="width: {{ porcentaje }}%">
                        <div class="progress-bar progress-bar-striped bg-success progress-bar-animated">
                            {{ porcentaje }}</div>
                    </div>
                    <div class="progress-bar progress-bar-striped progress-bar-animated" style="width: {{ restante }}%">
                        <div class="progress-bar progress-bar-striped  bg-secondary progress-bar-animated">
                            {{ restante }}</div>
                    </div>

                </div>
            </div>
        </div>
    </div>
<!-- 
    <button type="button" class="btn btn-dark my-1" data-bs-toggle="modal" data-bs-target="#Dobleclick"
        data-taskid="0">Agregar Categoria
    </button> -->

<!-- Modal para ver prodcutos -->
<div class="modal fade " data-bs-backdrop="static" id="Dobleclick" tabindex="-1">

    <div class="modal-dialog modal-dialog-centered" style="width: 410px;">
        <div class="modal-content">

            <div class="modal-header"><!--Header-->
                <h5 class="modal-title">Doble click para editar</h5> 
                <button type="button" class="btn-close" data-bs-dismiss="modal">
                </button>
            </div>

            <div class="modal-body"> <!--Formulario-->
               <video id="DobleclickVideo" loop src="../static/videos/Dobleclick.mp4"   class="w-100"></video>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Obtener el elemento del video
        var video = document.getElementById('DobleclickVideo');

        // Esperar 2 segundos antes de empezar a reproducir el video
        setTimeout(function () {
            video.play();
        }, 500); // 2000 ms = 2 segundos
    });
</script>


<script>
document.addEventListener('DOMContentLoaded', function () {
    // Verificar si el modal ya se ha mostrado en esta sesión
    if (!sessionStorage.getItem('modalShown')) {
        // Mostrar el modal
        var myModal = new bootstrap.Modal(document.getElementById('Dobleclick'));
        myModal.show();

        // Marcar el modal como mostrado en sessionStorage
        sessionStorage.setItem('modalShown', 'true');
    }
});
</script>

    <!--Musica-->
    <!-- <audio id="audio-fondo" autoplay loop>
        <source src="../../static/Audio/Audio.mp3" type="audio/mpeg">
        Tu navegador no soporta el elemento de audio
    </audio>
    <script src="../../static/Js/Audio.js"></script> -->

</section>

{%endblock%}