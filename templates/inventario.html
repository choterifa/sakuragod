{%extends 'base.html'%}

{%block title%} Login{%endblock%}

{%block inventario%}

<section class="inventario">
    <h1 class="inventario__titulo text-center">Inventario de productos</h1>

    <button type="button" class="btn_agregar btn btn-primary my-2" data-bs-toggle="modal" data-bs-target="#abrirModal"
        data-taskid="0">Agregar una Producto
    </button>

    <!--NUeva tabla-->
    <table class="table  table-hover table-striped align-middle">
        <thead>
            <tr>
                <th scope="col ">Nombre</th> <!--Columna Encabezados-->
                <th scope="col">Precio Venta</th>
                <th scope="col">Precio Compra</th>
                <th scope="col">Existencias</th>
                <th scope="col">Editar</th>
            </tr>
        </thead>
        <tbody class="table-group-divider">
            {% for indice in Productos %} <!--es un nombre cualquiera mas el que recibe de la variable-->
            <tr>
                <td>{{ indice[1] }}</td>
                <td>{{ indice[2] }}</td>
                <td>{{ indice[3] }}</td>
                <td>{{ indice[4] }}</td>
                <!--Seccion de edicion (Editar/Eliminar)-->
                <td>
                    <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal"
                        data-bs-target="#abrirModal" data-bs-id="{{indice[0]}}" data-bs-nombre="{{indice[1]}}"
                        data-bs-venta="{{indice[2]}}" data-bs-compra="{{indice[3]}}"
                        data-bs-existencias="{{indice[5]}}">Editar<i class="fas fa-edit"></i>
                    </button>
                    <form action="/delete_task" method="post">
                        <input type="hidden" name="indice_id" value="{{indice[0]}}"><!--Form oculto para obtener id-->
                        <button type="submit" id="delete__btn" class="btn btn-danger">Eliminar<i
                                class="fas fa-trash-alt"></i>
                        </button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</section>


<!-- Modal para crear/editar tarea -->
<div class="modal fade" id="abrirModal" tabindex="-1">

    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-header"><!--Header-->
                <h5 class="modal-title">Agregar Producto</h5> <!--id-->
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                </button>
            </div>

            <div class="modal-body"> <!--Formulario-->
                <form id="taskForm" method="post" action="{{ url_for('add_task')}}"> <!--AÃ±adir producto-->
                    <div class="">
                        <label for="nombre">Nombre:</label>
                        <input type="text" class="form-control" id="nombre" name="nombre" required>
                    </div>
                    <div class="">
                        <label for="compra">Precio Compra:</label>
                        <input type="text" class="form-control" id="precio_compra" name="precio_compra" required>
                    </div>
                    <div class="">
                        <label for="venta">Precio Venta:</label>
                        <input type="text" class="form-control" id="precio_venta" name="precio_venta" required>
                    </div>
                    <div class="">
                        <label for="existencias">Existencias:</label>
                        <input type="text" class="form-control" id="existencias" name="existencias" required>
                    </div>
                    <div class="text-center mt-2">
                        <button type="submit" class="btn btn-primary">Guardar</button>
                    </div>
                </form>
            </div>

        </div>
    </div>
</div>



{%endblock%}